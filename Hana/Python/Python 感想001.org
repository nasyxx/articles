#+title: Python å­—ç¬¦ä¸²æ¸…ç†çš„æ€è€ƒ
#+date: <2018-06-15 Fri>
#+author: Nasy
#+tags: éšç¬”, essay, python
#+ltags: èŠ±, hana, ğŸŒ¸
#+categories: Flower, Eassy
#+summary: å­—ç¬¦ä¸²æ¸…ç† <code>replace</code> or <code>strip</code> é€Ÿåº¦éªŒè¯ä»¥åŠæ€è€ƒã€‚
#+comment: Python æ„Ÿæƒ³ 001
#+href: python-impression-001

* éªŒè¯æµ‹è¯•
ä¸¤ä¸‰å¹´å‰ï¼Œåœ¨æŸä¸ªåœ°æ–¹ï¼ˆæˆ–è®¸æ˜¯ cookbookï¼‰ï¼Œçœ‹åˆ°è¿‡ä¸€æ¡:

#+BEGIN_QUOTE
  åœ¨æ¸…ç†å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå°½é‡ç”¨ @@html: <del> @@ ~replace~ @@html: </del> @@ ~strip~ ï¼Œå› ä¸ºåœ¨æ•ˆç‡ä¸Šé«˜å‡ºå¾ˆå¤šã€‚
#+END_QUOTE

è¿™ä¸¤å¤©æ­£å¥½æœ‰æœºä¼šï¼Œè¯•äº†è¯•ï¼Œäº‹å®ç¡®å®å¦‚æ­¤ã€‚

ç›´æ¥çœ‹ç»“æœå§ï¼

åŸå§‹å­—ç¬¦ä¸²æ˜¯è¿™æ ·çš„ï¼š

#+BEGIN_SRC python
  test_string = "      ******************sss--------------------       \n"
#+END_SRC

ç„¶åï¼Œæˆ‘çš„æµ‹è¯•å‘¢ï¼Œä¹Ÿæ˜¯ç®€å•çš„ç”¨äº† ~timeit~ ï¼Œå¹¶æ²¡æœ‰æ›´æ·±å…¥çš„å»åšã€‚

#+BEGIN_SRC python
  >>> %timeit test_string.replace("*", "").replace("-", "").replace(" ", "").replace("\n", "")

  1.47 Âµs Â± 4.14 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)

  >>> %timeit test_string.strip(" *-")

  458 ns Â± 11 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)
#+END_SRC

#+html: <del>
å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œ ~replace~ æ¯” ~strip~ çš„é€Ÿåº¦ä¼˜åŠ¿å¤ªå¤§äº†ã€‚
#+html: </del>

** New :: <2018-12-25 Tue>

~strip~ æ¯” ~replace~ ä¼˜åŠ¿å¾ˆå¤§ï¼Œä¸‰å€æœ‰ä½™

ä¸è¿‡å˜›ï¼Œ ~strip~ å§‹ç»ˆæ˜¯åªèƒ½æ¸…ç†ä¸¤ä¾§çš„ï¼Œå­—ä¸­é—´çš„ï¼Œè¿˜æ˜¯è¦é  ~replace~ æˆ–è€…æ­£åˆ™ã€‚

* æ€è€ƒ

æ­£å¥½å˜›ï¼Œæœ€è¿‘åˆæ›´åŠ æ·±å…¥çš„äº†è§£äº†ç‚¹æ–‡å­¦ç¼–ç¨‹ã€‚è™½ç„¶ç”¨ ~Python~ è¦è¾¾åˆ°æ–‡å­¦ç¼–ç¨‹ï¼Œè¿˜æœ‰å¾ˆé•¿çš„ä¸€æ®µè·¯éœ€è¦èµ°ï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä»£è¡¨ï¼Œå®ƒä¸èƒ½å»ç”¨é‚£ç§æ€æƒ³å»æäº‹ã€‚äºæ˜¯é‡åˆ°äº†ä¸€ä¸ªå›°æ‰°æˆ‘çš„é—®é¢˜ï¼š

*åœ¨è¿ç»­å‡ ä¸ª ~replace~ çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æœ‰æ•ˆè¿›è¡Œæ¼‚äº®çš„æ³¨é‡Šï¼Ÿ*

#+BEGIN_SRC python
  string.replace("\n", "").replace(">", "").replace("<", "").replace("#+", "")
#+END_SRC

ä¸€ç›´ä»¥æ¥ï¼Œæˆ–è€…è¯´ï¼ŒçŸ¥é“ ~replace~ é€Ÿåº¦æ›´å¿«ä¹‹åï¼Œä¸€ç›´ä»¥æ¥ï¼Œæˆ‘çš„è¿™äº›å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œéƒ½æ˜¯èƒ½ç”¨ ~replace~ å°±ä¸ç”¨å…¶ä»–çš„ï¼Œä¸èƒ½ç”¨çš„æ—¶å€™ï¼Œå¤§æ¦‚å°±æ˜¯è¦ç”¨æ­£åˆ™çš„æ—¶å€™äº†ã€‚ä¸è¿‡å°±åƒå¤§å®¶æ‰€çŸ¥é“çš„é‚£æ ·ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªçš„ ~.replace~ æ˜¯å¾ˆä¸‘é™‹ï¼Œè€Œä¸”ä¸æ–¹ä¾¿æ³¨é‡Šï¼Œå¾ˆä¸æ–‡å­¦ã€‚è™½ç„¶ä¹Ÿæœ‰åŠæ³•è®©ä»–å¯¹é½ `.` å¦‚ä¸‹é¢æ‰€ç¤ºï¼Œå˜å¾—æ¯”ä»¥å‰æ¼‚äº®å¤šäº†ï¼Œä½†æ˜¯ä¾ç„¶ä¸èƒ½å¤Ÿå¾ˆå¥½çš„åŠ ä¸Šæ³¨é‡Šï¼ˆ`\`åé¢æ˜¯ä¸èƒ½åŠ ä¸Šæ³¨é‡Šçš„ï¼‰ã€‚

#+BEGIN_SRC python
  string.replace("\n", "")\
        .replace("<", "") \
        .replace(">", "") \
        .replace("#+", "")
#+END_SRC

ç›´åˆ°æˆ‘ ~Haskell~ å†™çš„å¤šäº†ï¼Œæœ‰ä¸€å¤©çªç„¶å°±é†’æ‚Ÿäº†ï¼Œå…¶å®æˆ‘æ²¡å¿…è¦ä¸€å®šå†™åœ¨ ~replace~ çš„è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘å¯ä»¥æŠŠå®ƒå†™æˆä¸€ä¸ªå‡½æ•°ï¼ˆè™½ç„¶è¿™è®©æ—¶é—´å¼€é”€å˜å¤§ï¼Œä¼¼ä¹åˆæœ¬æœ«å€’ç½®äº†ï¼‰ã€‚

#+BEGIN_SRC python
  def clean_string(string: str) -> str:
      """Clean string.

      Strip `\n` as it used in the end of a line.
      ...
      """
      return string.replace("\n", "")\
                   .replace("<", "") \
                   .replace(">", "") \
                   .replace("#+", "")
#+END_SRC

è¿™æ ·ï¼Œæˆ‘æŠŠè§£é‡Šå†™åœ¨å‡½æ•°é‡Œé¢ï¼Œæ¸…ç†çš„æ—¶å€™ï¼Œ ~clean_string(string)~ å°±å¥½äº†ã€‚

* æ›´æ–°

** Jul 3, 2018

æ˜¯çš„ï¼Œæˆ‘æ˜ç™½ï¼Œ ~\~ å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œå®Œå…¨å¯ä»¥ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œç„¶å ~return~ ï¼š

#+BEGIN_SRC python
  return (
      string.replace("#", "")
      .replace("+", "")
      .replace("12", "")
      .replace("#", "")
      .replace("+", "")
      .replace("12", "")
  )
#+END_SRC

ä¸è¿‡ï¼Œæˆ‘å¾ˆè®¨åŒæ‹¬å·ï¼Œç‰¹åˆ«æ˜¯éœ€è¦æˆ‘æ‰‹åŠ¨æ‹¬èµ·æ¥çš„æ‹¬å·ï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸èƒ½åƒå†™ Lisp çš„æ—¶å€™ä¸€æ ·ï¼Œåªéœ€è¦å†™å•è¾¹çš„æ‹¬å·ï¼Œç”šè‡³ï¼Œåªéœ€è¦ç¼©è¿›å°±èƒ½è‡ªåŠ¨è¡¥ä¸Šæ‹¬å·ã€‚å› æ­¤ï¼Œè¿™ä¸ªæ–¹æ¡ˆåœ¨æœ‰æ–°çš„ Python code formatter å®ç°ä»¥å‰ï¼Œæˆ‘æ˜¯ä¸æ‰“ç®—ä½¿ç”¨çš„ã€‚å½“ç„¶ç°åœ¨è¿˜çœŸæœ‰ä¸€ä¸ª formatter [[https://github.com/ambv/black][black]] å®ç°äº†å®ƒã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä¹Ÿæ˜¯åè¯äº†ï¼Œè¿™ç¯‡æ–‡ç« å®Œæˆä¹‹æ—¶(2018-06-15)ï¼Œblack å°šä¸èƒ½è½»æ¾çš„åœ¨ Emacs æˆ–è€… Atom ä¸­ä½¿ç”¨ï¼Œè¦ä½¿ç”¨å®ƒï¼Œè¿˜éœ€è¦å‘½ä»¤è¡Œï¼Œå¹¶ä¸èƒ½åœ¨ä¿å­˜æ–‡ä»¶çš„åŒæ—¶ï¼Œç«‹å³ format . è€Œ Python Language Server æ”¯æŒ black (pyls-black) åˆ™æ˜¯åœ¨ 2018-06-17.

** Dec 25, 2018

å•Šï¼Œæ„Ÿè°¢ [[https://github.com/frostming][frostming]]ï¼æ„šè ¢çš„æˆ‘ç«Ÿç„¶ n \mu ä¸åˆ†ï¼Œå¯¼è‡´å†™åã€‚ï¼ˆé‡è¦çš„æ˜¯æ€æƒ³ï¼Œï¼ˆç¢ç¢å¿µï¼Œè¯¶ï¼Œæˆ‘ä¹Ÿå¤ªå¹´è½»äº†ã€‚
