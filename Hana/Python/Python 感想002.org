#+title: ç«‹å³æ‰§è¡Œ <code>map</code> å‡½æ•°
#+date: <2018-06-19 Sat>
#+author: Nasy
#+tags: éšç¬”, essay, python
#+ltags: èŠ±, hana, ğŸŒ¸
#+summary: æˆ‘æ°¸è¿œå–œæ¬¢ map
#+comment: Python æ„Ÿæƒ³ 002
#+href: python-impression-002


* å‰è¨€

è‡ªä» ~Python 3~ æŠŠ ~map~ å‡½æ•°å˜ä¸ºæƒ°æ€§çš„ä¹‹åï¼Œé‚£äº›æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œæ€æ ·ç«‹å³æ‰§è¡Œï¼ŒæŠŠå‡½æ•°å¼çˆ±å¥½è€…ï¼Œä¸å–œæ¬¢å†™ ~for~ çš„æˆ‘éš¾ä½äº†ï¼Œå› ä¸ºç›´æ¥å†™ ~map(f, lst)~ è¿”å›çš„æ˜¯ä¸€ä¸ª ~<map at 0x17c249c50>~, ä¸€ä¸ª ~generator~. å‡½æ•° ~f~ å¹¶æ²¡æœ‰è¢«æ‰§è¡Œå‘¢ã€‚

* ç ”ç©¶

** èµ·åˆï¼Œæˆ‘æ˜¯ç”¨ ~list~.

æˆ‘ä¸ºäº†æ‰§è¡Œè¿™äº›ï¼Œæ€»æ˜¯åœ¨å¤–é¢å¥—ä¸€å±‚ ~list~ å‡½æ•°ï¼Œå˜ä¸º ~list(map(f, lst))~ ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œè¿™æ ·æ˜¯ä¸å¥½çš„ï¼Œå¦‚æœé‚£ä¸ª ~lst~ å¾ˆå¤§ï¼Œé‡Œé¢çš„å…ƒç´ æ•°é‡å¾ˆå¤šï¼Œæœ€åç”Ÿæˆä¸€ä¸ª ~list~ ä¸ä½†ä¼šæ‹–æ…¢é€Ÿåº¦ï¼Œè¿˜ä¼šå å¾ˆå¤šå†…å­˜ï¼ˆå¤§æ¦‚ï¼‰ã€‚

** ç”¨ ~for~ å¾ªç¯æ¥æ›¿ä»£ ~map~.

æˆ‘æœ€æ—©æƒ³åˆ°çš„ï¼Œå°±æ˜¯è¿™ä¸ªï¼Œå°±ä¹‹å‰é‚£ä¸ªæ¥è¯´ï¼Œå¾ˆæ˜¾ç„¶ï¼Œå¯è¿™æ ·æ¥æ›¿ä»£ ~map~:

#+BEGIN_SRC python
    for l in lst:
        f(l)
#+END_SRC

ä¸è¿‡ï¼Œä¸€å¼€å§‹æˆ‘å°±è¯´äº†ï¼Œä¸æƒ³ç”¨ ~for~ ï¼ˆå¥½åƒæ˜¯æœ‰ç‚¹ä»»æ€§å‘¢ï¼‰ã€‚

äºæ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•ä¸è¡ŒğŸ™…ã€‚

** æœ€åï¼Œæœ‰äº† ~all~ å’Œ ~any~.

æƒ³è¦åˆ¤æ–­ä¸€ä¸ª ~list~ ä¸­æ˜¯å¦æœ‰ ~True~ ï¼Œå°±å¯ä»¥åœ¨æ ‡å‡†åº“ä¸­å‘ç°äº†è¿™ä¸¤ä¸ªå‡½æ•° ~all~ å’Œ ~any~. è¿™ä¸¤ä¸ªå‡½æ•°ä¸€ä¸ªæ˜¯å½“ ~list~ ä¸­å…¨ä¸º ~True~ çš„æ—¶å€™ï¼Œè¿”å› ~True~ ï¼Œå¦åˆ™è¿”å› ~False~ ï¼Œä¸€ä¸ªæ˜¯å½“ ~list~ ä¸­å«æœ‰ ~True~ çš„æ—¶å€™ï¼Œè¿”å› ~True~ ï¼Œå¦åˆ™ ~False~.

å½“æˆ‘ä»¬çš„ ~f~ æ²¡æœ‰è¿”å›å€¼çš„æ—¶å€™ï¼Œåœ¨ ~Python 3~ ä¸­å°±æ˜¯ ~False~ ï¼Œå› æ­¤ï¼Œæ­¤æ—¶åªéœ€è¦ç®€å•çš„ ~any(map(f, lst))~ å°±å¯ä»¥ç«‹å³æ‰§è¡Œè¿™ä¸ªæ²¡æœ‰è¿”å›å€¼çš„ ~map~ äº†ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œ *å½“å‡½æ•° ~f~ å…·æœ‰è¿”å›å€¼ï¼Œè€Œä¸” ~bool~ å€¼ä¸º ~True~ çš„æ—¶å€™ï¼Œ ~any~ å°±å¤±æ•ˆäº†ï¼Œæˆ–è€…è¯´ï¼Œè¿è¡Œçš„ä¸å®Œæ•´ã€‚* æ¯•ç«Ÿï¼Œæœ‰äº†è¿”å›å€¼ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è¿™æ ·æ‰§è¡Œå®ƒå‘¢ï¼Ÿå¿«æŠŠé‚£äº›å‘½ä»¤æå‡ºæ¥ï¼Œå•ç‹¬ä½œä¸ºä¸€ä¸ªå‡½æ•°å•Šå–‚ï¼

* å‡ æ¡å…³äº ~map~ çš„äº‹é¡¹

ï¼ˆéæ–°æ‰‹è¯·ç›´æ¥ç•¥è¿‡ï¼Œä¸è¿‡ï¼Œå¤§ä½¬ä»¬å¤§æ¦‚ä¹Ÿä¸ä¼šæ¥çœ‹æˆ‘çš„..ï¼‰æˆ‘åœ¨æƒ³ä¹‹åæˆ–è®¸ä¼šæœ‰ä¸€ç¯‡ ~Python~ å‡½æ•°å¼æ„Ÿæƒ³å‡ºç°å‘¢ w

+ ~map~ é€Ÿåº¦æ˜¯æ¯” ~for~ å¾ªç¯è¦å¿«çš„ï¼Œå½“ç„¶ï¼Œåˆ—è¡¨æ¨å¯¼å¼é™¤å¤–ï¼ˆåªé€‚ç”¨äºç›®å‰çš„ ~Python 3~ ï¼‰
+ åˆ—è¡¨æ¨å¯¼å¼å…¶å®å¯ä»¥å¾ˆç®€å•çš„ç”¨ ~map~ + ~filter~ çš„ç»„åˆæ›¿ä»£ï¼Œè™½ç„¶æ•ˆç‡ä¸æ€ä¹ˆé«˜:

#+BEGIN_SRC python
    (i + i for i in range(10) if i > 5)
    map(lambda x: x + i, filter(lambda x: x > 5, range(10)))
#+END_SRC

+ å½“ç„¶ï¼Œç”¨ä¸Š ~itertools~ åº“ä¸­çš„å‡½æ•°ï¼Œæ¯”å¦‚ ~takewhile~ ï¼Œä¼šæ›´æ£’å“Ÿ!
