#+title: Python 3.7 å¸¦æ¥çš„ Bug
#+date: <2018-08-15 Wed>
#+author: Nasy
#+tags: éšç¬”, essay, python
#+ltags: èŠ±, hana, ğŸŒ¸
#+summary: å…³é”®è¯ async å¯¼è‡´ Tensorflow ä¸èƒ½ç”¨ã€‚jedi ä¹Ÿæœ‰å¥‡æ€ªçš„é—®é¢˜ã€‚
#+comment: Python æ„Ÿæƒ³ 003
#+href: python-impression-003

æˆ‘å¾ˆå–œæ¬¢å°é²œï¼Œæ— è®ºæ˜¯ç”Ÿæ´»ä¸Šçš„ï¼Œè¿˜æ˜¯ç”µè„‘ä¸Šæ­£åœ¨ä½¿ç”¨çš„å†…å®¹ã€‚å½“ç„¶äº†ï¼Œä¼´éšç€æ–°äº‹ç‰©çš„æ–°ç‰¹æ€§ï¼Œå¿…ç„¶ä¼šå¸¦æ¥å¾ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„ bugã€‚

* Python 3.7 ä¸èƒ½å†ä½¿ç”¨ async ä½œä¸ºå…³é”®è¯

å…ˆçœ‹ä¸¤ä¸ªä¾‹å­å§ï¼š

#+BEGIN_SRC python
  Python 3.6.6 (default, Aug  3 2018, 18:10:32)
  [GCC 4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.10.38)] on darwin
  Type "help", "copyright", "credits" or "license" for more information.
  >>> async = ""
  >>> async
  ''
#+END_SRC

#+BEGIN_SRC python
  Python 3.7.0 (default, Aug 13 2018, 03:32:41)
  [Clang 10.0.0 (clang-1000.10.38)] on darwin
  Type "help", "copyright", "credits" or "license" for more information.
  >>> async = ""
    File "<stdin>", line 1
      async = ""
            ^
  SyntaxError: invalid syntax
#+END_SRC

æˆ‘ç›¸ä¿¡ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ¡ä¸ä¼šå¯¹ä½ äº§ç”Ÿä»»ä½•å½±å“ï¼Œåªè¦ä½ ä¸æŠŠ async ä½œä¸ºå…³é”®è¯ã€‚

ä¸è¿‡ï¼Œè¿™ä¸ªå°±è‹¦äº†ç”¨ Tensorflow çš„å®¶ä¼™äº†å‘¢ã€‚é—®é¢˜æ˜¯è¿™æ ·çš„ï¼ŒTensorflow ä¸­ä½¿ç”¨äº† async ä½œä¸ºå…³é”®è¯ï¼Œè€Œä¸”ï¼Œè¿™å…¶ä¸­çš„éƒ¨åˆ†ä»£ç è¿˜æ˜¯ C/C++ ç”Ÿæˆçš„...äºæ˜¯ï¼Œæ— è®ºä½ æ˜¯ä»æºç ç¼–è¯‘æ–°çš„ Tensorflowï¼Œè¿˜æ˜¯ç›´æ¥ä½¿ç”¨æŸä¸ª whl å®‰è£…ï¼Œåœ¨æœ€ç»ˆä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šå¤±è´¥ã€‚ï¼ˆæˆ‘æ‰ä¸ä¼šè¯´å½“æ—¶ï¼Œè¿™ä¸ªé—®é¢˜å‘äº†æˆ‘å¥½ä¹…ï¼Œè¿˜ä»¥ä¸ºæ˜¯æˆ‘å“ªé‡Œçš„ cython å†™é”™äº†ï¼

å¥½åœ¨ï¼Œå·²ç»æ…¢æ…¢è§£å†³äº†ã€‚å…·ä½“çœ‹è¿™äº› [[https://github.com/tensorflow/tensorflow/pull/20766/files/7000c3e30f7c5daf15e34f9a23a6ad3c98239ce3#diff-a1983d51233d117d820e7f1f367b157b][commit]].

Sample:

#+BEGIN_SRC python
  tensorflow::Status CreateRemoteContexts(
      const std::vector<string>& remote_workers, int64 rendezvous_id,
      const tensorflow::ServerDef& server_def,
      tensorflow::eager::EagerClientCache* remote_eager_workers, bool async,
      tensorflow::eager::EagerClientCache* remote_eager_workers, bool is_async,
#+END_SRC

è§£å†³æ–¹æ¡ˆï¼šç”¨ ~pyenv~ å§ï¼

* Jedi çš„è¡¥å…¨

è¿™ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨ä½¿ç”¨ Emacs æ—¶é‡åˆ°çš„ã€‚å½“æ—¶ï¼Œæ— è®ºæ˜¯ Emacs çš„ ~lsp-mode~ è¿˜æ˜¯ ~anaconda-mode~ ç”šè‡³æ˜¯ ~elpy~ éƒ½é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¡¥å…¨çš„æ—¶å€™ï¼Œåªè¦æˆ‘å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼ŒåŠ ä¸Šäº† type hintingï¼Œå°±ä¸ä¼šå‡ºç°ã€‚åœ¨æˆ‘å°è¯•äº†å¾ˆå¤šä¹‹åï¼Œç»ˆäºæ„è¯†åˆ°è¿™ä¸ªæ˜¯ jedi çš„é—®é¢˜: [[https://github.com/davidhalter/jedi/issues/1198][issue/1198]].

ï¼ˆæˆ‘å½“æ—¶è®¤ä¸ºæ˜¯ Emacs çš„é—®é¢˜ï¼Œè¿˜åœ¨ emacs-china æäº†ä¸ªé—® [[https://emacs-china.org/t/python-type-hint/6663][QUESTION]]ï¼ŒçœŸæ˜¯æ„Ÿæƒ³çƒ­å¿ƒç¾¤ä¼—çš„å¸®å¿™å‘¢ã€‚

è§£å†³æ–¹æ¡ˆï¼šç”¨ ~pyenv~ å§ï¼

------------

å˜›ï¼Œå…¶å®ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘æƒ³è¯´çš„å°±æ˜¯ï¼Œé‡åˆ° python çš„ç‰ˆæœ¬çš„é—®é¢˜ï¼Œåˆ«çŠ¹è±«ï¼Œç”¨ pyenv å§ï¼
